#!/bin/bash

set -e  # Exit on error

make prism_clean
rake clean

make prism
rake templates

make
rake compile

./run_erbx_tests
rake test

./erbx lex examples/test.html.erb
./erbx ruby examples/test.html.erb
./erbx html examples/test.html.erb
./erbx parse examples/test.html.erb
./erbx prism examples/test.html.erb

bin/lint
bin/tidy
bundle exec rubocop

echo ""
echo "Integration successful!"
